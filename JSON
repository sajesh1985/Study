display: flex;justify-content: center;margin-top: 4px;font-size: 12px;

<div class="StyledGenerateInfoBlock css-3m3o7h" style="
    /* max-width: 433px; */ /* Adjust width for smaller screens */
    white-space: unset;
    /* word-wrap: break-word !important; */
    overflow-wrap: break-word !important;
">Credit<span class="red">Companion</span><sup style="font-size: 7px;">TM</sup> is powered by generative AI tew the<span class="css-1607lwk"><button id="legal_disclaimer_info_block" data-button-purpose="link" class="css-4kh7p6"><span data-button-text="true">Legal Disclaimer</span></button></span>for more information.</div>

# This pipeline is for *frontend* CI builds and contains steps to deploy cdn assets / update feature flags in dev, staging and prod.
variables:
  - group: spg-buildpipelines-shared-variables
    
pr:
  branches:
    include:
    - main
    - releases/*
  paths:
    include:
      - src/synthia-web/**
    
trigger:
  branches:
    include:
      - main
      - releases/*
  paths:
    include:
      - src/synthia-web/**

resources:
  repositories:
    - repository: mfe-infra
      type: git
      ref: refs/heads/main
      name: SNLServiceModules/mfe-infra
    - repository: ado-yaml-templates
      type: git
      ref: refs/heads/master
      name: DevOps Shared Framework/ado-yaml-templates

stages:
  # Do not perform scans on release branch
  # - ${{if eq(startsWith(variables['Build.SourceBranch'], 'refs/heads/releases/'),False) }}:
  #     - stage: AppSecStage
  #       displayName: Security Assesment
  #       dependsOn: []
  #       jobs:
  #         - job:
  #           displayName: Security Scanning
  #           pool:
  #             vmImage: ubuntu-latest
  #         - template: /appsec/pipelines/scan-javascript.v1.yml@ado-yaml-templates
  #           parameters:
  #             appsec:
  #               whitesource:
  #                 projectToken: $(whitesource_token)
  #                 excludes: 'node_modules'
  #                 apiKey: $(whitesource_apikey)
  #                 whitesource_userkey: $(whitesource_userKey)
  #               fortify:
  #                 versionId: '16202'
  #                 excludes: 'node_modules'
  #                 pool: CIQProPool
  #               sonarqube:
  #                 projectKey: synthia
  #                 projectName: synthia
  #                 serviceConnection: 'sonarqube'
  #                 sources: src/synthia-web
  #             image:
  #               framework: node
  #               profile: 'javascript'
  #               imageName: 'synthia'
  #               devbranch: 'main'
  #             nodeVersion: 22.x

  - stage: build_stage
    dependsOn: []
    jobs:
      - template: build/npm_build.v1.yml@mfe-infra
        parameters:
          node_version: 22.x
          project_directory: /src/synthia-web/
          dist_directory: /src/synthia-web/dist/
          serviceName: mfe-creditmemo
          postBuild:
            # - task: Npm@1
            #   displayName: 'Run Unit Tests'
            #   inputs:
            #     command: custom
            #     customCommand: run test:coverage
            #     workingDir: $(Build.SourcesDirectory)/
            #     # verbose: true

            - task: Npm@1
              displayName: 'Lint'
              inputs:
                command: custom
                customCommand: run lint
                workingDir: $(Build.SourcesDirectory)/src/synthia-web/

            # Publish code coverage results
            # Publish Cobertura or JaCoCo code coverage results from a build
            # - task: PublishCodeCoverageResults@1
            #   inputs:
            #     codeCoverageTool: Cobertura
            #     summaryFileLocation: $(Build.SourcesDirectory)/src/synthia-web/test-coverage/cobertura-coverage.xml
            #     pathToSources: $(Build.SourcesDirectory)/src/synthia-web/
            #     failIfCoverageEmpty: true
            #     #verbose: true

            # For PullRequests, we want to assess whether the current PR reduces the code coverage for this repository
            # We are checking that coverage for both lines and branches are greater than or equal to the most recent successful CI build
            # We are continuing on Error so that the build continues.
            # We can then use the codecoverage status check in ADO to specify whether this validation is optional or required.
            # https://spglobal.visualstudio.com/SNLServiceModules/_settings/repositories?_a=policiesMid&repo=3e3e2075-d15a-459a-a85e-96731c72820a&refs=refs/heads/main
            # - ${{if eq(variables['Build.Reason'], 'PullRequest')}}:
            #     - task: mspremier.BuildQualityChecks.QualityChecks-task.BuildQualityChecks@8
            #       displayName: 'Check build quality lines'
            #       continueOnError: true
            #       inputs:
            #         checkCoverage: true
            #         coverageType: lines
            #         baseBranchRef: '$(SYSTEM_PULLREQUEST_TARGETBRANCH)'
            #     - task: mspremier.BuildQualityChecks.QualityChecks-task.BuildQualityChecks@8
            #       displayName: 'Check build quality branches'
            #       continueOnError: true
            #       inputs:
            #         checkCoverage: true
            #         coverageType: branches
            #         baseBranchRef: '$(SYSTEM_PULLREQUEST_TARGETBRANCH)'

  - ${{if in(variables['Build.Reason'], 'IndividualCI', 'BatchedCI', 'Manual')}}:
      - ${{ if not(startsWith(variables['Build.SourceBranch'], 'refs/heads/releases/')) }}:
          - stage: rollout_dev_stage
            dependsOn: build_stage
            displayName: Development rollout
            jobs:
              - template: deploy/cdn.v1.yml@mfe-infra
                parameters:
                  environment: development
                  cdn_directory: spg/creditmemo
                  flag_project_id: react-spa
                  flag_id: fflag_mfe_synthia

  #     - ${{ if startsWith(variables['Build.SourceBranch'], 'refs/heads/releases/') }}:
  #         - stage: rollout_staging_stage
  #           dependsOn: build_stage
  #           displayName: Staging rollout
  #           jobs:
  #             - template: deploy/cdn.v1.yml@mfe-infra
  #               parameters:
  #                 environment: staging
  #                 cdn_directory: spg/creditmemo
  #                 flag_project_id: react-spa
  #		    flag_id: fflag_mfe_synthia

  #         - stage: approval_production_stage
  #           dependsOn: rollout_staging_stage
  #           displayName: Production approval
  #           jobs:
  #             - job: waitForValidation
  #               displayName: Wait for external validation
  #               pool: server
  #               timeoutInMinutes: 4320 # job times out in 3 days
  #               steps:
  #                 - task: ManualValidation@0
  #                   timeoutInMinutes: 1440 # task times out in 1 day
  #                   inputs:
  #                     notifyUsers: |
  #                       synthiamfe_approvers@spglobal.com
  #                     instructions: 'Please validate the build configuration and resume'

  #         - stage: rollout_production_stage
  #           dependsOn: approval_production_stage
  #           displayName: Production rollout
  #           jobs:
  #             - template: deploy/cdn.v1.yml@mfe-infra
  #               parameters:
  #                 environment: production
  #                 cdn_directory: spg/creditmemo
  #                 flag_project_id: react-spa
  #                 flag_id: fflag_mfe_synthia

export const downloadReport = async (fileId: string): Promise<any> => {
  try {
      //let url = getApiRootPath();
      let url = "http://localhost:8000/";
      const startTime = Date.now();
      let data: any = null;

      while (Date.now() - startTime < 90000) {
        const reportResponse: AxiosResponse<any> = await axios.get(url + `reports/downloadreport/${fileId}`);
        
        const reportJson = await reportResponse.data;
        if (reportJson.awaiting_approval) {
          data = reportJson.outline;
          return data;
        }
        await new Promise(res => setTimeout(res, 1000));
      }
  }
  catch (error) {
    console.error('Error fetching sections:', error);
    return null;
  }

}

@router.get("reports/downloadreport/{file_Id}")
async def downloadReport(file_Id: str):
    """Fetch the generated report."""
    return await fetch_report(file_Id)


[{"INSTRUMENT_DETAIL_ID":"3807016","RT_INSTRUMENT_NAME":"US$1 bil 4.45% nts due 05/06/2044","RT_MATURITY_DATE":"5/6/2044","RT_CUSIP9":"037833AT7","RT_CINS":null,"RT_ISINS":"US037833AT77","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/1/2014","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"4.45%","RT_CLASS_AMOUNT":"USD 1,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":456016791,"RT_SOURCE_UPD_ID":"456016791","Instrumentkey":"1131907","KeyFndg":"3807016","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"3902363","RT_INSTRUMENT_NAME":"EUR1.4 bil 1.625% nts due 11/10/2026","RT_MATURITY_DATE":"11/10/2026","RT_CUSIP9":"037833AV2","RT_CINS":null,"RT_ISINS":"XS1135337498","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"11/4/2014","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"1.625%","RT_CLASS_AMOUNT":"EUR 1,400,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":478381790,"RT_SOURCE_UPD_ID":"478381790","Instrumentkey":"1185295","KeyFndg":"3902363","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"3934639","RT_INSTRUMENT_NAME":"US$1.5 bil 2.50% nts due 2025","RT_MATURITY_DATE":"12/31/2025","RT_CUSIP9":"037833AZ3","RT_CINS":null,"RT_ISINS":"US037833AZ38","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/2/2015","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.5%","RT_CLASS_AMOUNT":"USD 1,500,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":489646348,"RT_SOURCE_UPD_ID":"489646348","Instrumentkey":"1193373","KeyFndg":"3934639","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"3934642","RT_INSTRUMENT_NAME":"US$2 bil 3.45% nts due 2045","RT_MATURITY_DATE":"12/31/2045","RT_CUSIP9":"037833BA7","RT_CINS":null,"RT_ISINS":"US037833BA77","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/2/2015","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3.45%","RT_CLASS_AMOUNT":"USD 2,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":489646354,"RT_SOURCE_UPD_ID":"489646354","Instrumentkey":"1193375","KeyFndg":"3934642","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"3942510","RT_INSTRUMENT_NAME":"CHF375 mil 0.75% bnds due 02/25/2030","RT_MATURITY_DATE":"2/25/2030","RT_CUSIP9":null,"RT_CINS":"U0378GAC9","RT_ISINS":"CH0271171693","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/18/2015","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Bonds","RT_CURRENT_COUPON_RATE":"0.75%","RT_CLASS_AMOUNT":"CHF 375,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":491881791,"RT_SOURCE_UPD_ID":"491881791","Instrumentkey":"1195403","KeyFndg":"3942510","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4037310","RT_INSTRUMENT_NAME":"EUR1 bil 2.00% nts due 09/17/2027","RT_MATURITY_DATE":"9/17/2027","RT_CUSIP9":"037833BM1","RT_CINS":null,"RT_ISINS":"XS1292389415","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"9/18/2015","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2%","RT_CLASS_AMOUNT":"EUR 1,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":519679138,"RT_SOURCE_UPD_ID":"519679138","Instrumentkey":"1216737","KeyFndg":"4037310","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4083272","RT_INSTRUMENT_NAME":"US$2 bil 3.25% sr nts due 02/23/2026","RT_MATURITY_DATE":"2/23/2026","RT_CUSIP9":"037833BV1","RT_CINS":null,"RT_ISINS":"US037833BV15","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/17/2016","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3.25%","RT_CLASS_AMOUNT":"USD 2,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":539804072,"RT_SOURCE_UPD_ID":"539804072","Instrumentkey":"1226552","KeyFndg":"4083272","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4083273","RT_INSTRUMENT_NAME":"US$2.5 bil 4.65% sr nts due 02/23/2046","RT_MATURITY_DATE":"2/23/2046","RT_CUSIP9":"037833BX7","RT_CINS":null,"RT_ISINS":"US037833BX70","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/17/2016","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"4.65%","RT_CLASS_AMOUNT":"USD 2,500,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":539804074,"RT_SOURCE_UPD_ID":"539804074","Instrumentkey":"1226553","KeyFndg":"4083273","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4264484","RT_INSTRUMENT_NAME":"EUR1.25 bil nts due 05/24/2029","RT_MATURITY_DATE":"5/24/2029","RT_CUSIP9":"037833CW8","RT_CINS":null,"RT_ISINS":"XS1619312686","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/17/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":null,"RT_CLASS_AMOUNT":"EUR 1,250,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":884676985,"RT_SOURCE_UPD_ID":"884676985","Instrumentkey":"1267005","KeyFndg":"4264484","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4264485","RT_INSTRUMENT_NAME":"EUR1.25 bil nts due 05/24/2025","RT_MATURITY_DATE":"5/24/2025","RT_CUSIP9":"037833CV0","RT_CINS":null,"RT_ISINS":"XS1619312173","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/17/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":null,"RT_CLASS_AMOUNT":"EUR 1,250,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":884676987,"RT_SOURCE_UPD_ID":"884676987","Instrumentkey":"1267006","KeyFndg":"4264485","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4275399","RT_INSTRUMENT_NAME":"US$1 bil 3.00% nts due 06/20/2027","RT_MATURITY_DATE":"6/20/2027","RT_CUSIP9":"037833CX6","RT_CINS":null,"RT_ISINS":"US037833CX61","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"6/13/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3%","RT_CLASS_AMOUNT":"USD 1,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":887115066,"RT_SOURCE_UPD_ID":"887115066","Instrumentkey":"1269075","KeyFndg":"4275399","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4301315","RT_INSTRUMENT_NAME":"US$1 bil 3.75% nts due 09/12/2047","RT_MATURITY_DATE":"9/12/2047","RT_CUSIP9":"037833DD9","RT_CINS":null,"RT_ISINS":"US037833DD98","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"9/5/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3.75%","RT_CLASS_AMOUNT":"USD 1,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":891035118,"RT_SOURCE_UPD_ID":"891035118","Instrumentkey":"1274263","KeyFndg":"4301315","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4301316","RT_INSTRUMENT_NAME":"US$2 bil 2.90% nts due 09/12/2027","RT_MATURITY_DATE":"9/12/2027","RT_CUSIP9":"037833DB3","RT_CINS":null,"RT_ISINS":"US037833DB33","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"9/5/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.9%","RT_CLASS_AMOUNT":"USD 2,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":891035120,"RT_SOURCE_UPD_ID":"891035120","Instrumentkey":"1274264","KeyFndg":"4301316","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4322246","RT_INSTRUMENT_NAME":"US$1.5 bil 3.00% nts due 11/13/2027","RT_MATURITY_DATE":"11/13/2027","RT_CUSIP9":"037833DK3","RT_CINS":null,"RT_ISINS":"US037833DK32","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"11/6/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3%","RT_CLASS_AMOUNT":"USD 1,500,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":891949751,"RT_SOURCE_UPD_ID":"891949751","Instrumentkey":"1279045","KeyFndg":"4322246","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4322251","RT_INSTRUMENT_NAME":"US$1.25 bil 3.75% nts due 11/13/2047","RT_MATURITY_DATE":"11/13/2047","RT_CUSIP9":"037833DG2","RT_CINS":null,"RT_ISINS":"US037833DG20","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"11/6/2017","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3.75%","RT_CLASS_AMOUNT":"USD 1,250,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":891949761,"RT_SOURCE_UPD_ID":"891949761","Instrumentkey":"1279050","KeyFndg":"4322251","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4525621","RT_INSTRUMENT_NAME":"US$2 bil 2.05% nts due 09/11/2026","RT_MATURITY_DATE":"9/11/2026","RT_CUSIP9":"037833DN7","RT_CINS":null,"RT_ISINS":"US037833DN70","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"9/4/2019","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.05%","RT_CLASS_AMOUNT":"USD 2,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":902398238,"RT_SOURCE_UPD_ID":"902398238","Instrumentkey":"1382427","KeyFndg":"4525621","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4525625","RT_INSTRUMENT_NAME":"US$1.75 bil 2.20% nts due 09/11/2029","RT_MATURITY_DATE":"9/11/2029","RT_CUSIP9":"037833DP2","RT_CINS":null,"RT_ISINS":"US037833DP29","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"9/4/2019","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.2%","RT_CLASS_AMOUNT":"USD 1,750,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":902398546,"RT_SOURCE_UPD_ID":"902398546","Instrumentkey":"1382429","KeyFndg":"4525625","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4525624","RT_INSTRUMENT_NAME":"US$1.5 bil 2.95% nts due 09/11/2049","RT_MATURITY_DATE":"9/11/2049","RT_CUSIP9":"037833DQ0","RT_CINS":null,"RT_ISINS":"US037833DQ02","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"9/4/2019","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.95%","RT_CLASS_AMOUNT":"USD 1,500,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":902398244,"RT_SOURCE_UPD_ID":"902398244","Instrumentkey":"1382430","KeyFndg":"4525624","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4553283","RT_INSTRUMENT_NAME":"EUR1 bil nts due 11/15/2025","RT_MATURITY_DATE":"11/15/2025","RT_CUSIP9":"037833DR8","RT_CINS":null,"RT_ISINS":"XS2079716853","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"11/7/2019","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"0%","RT_CLASS_AMOUNT":"EUR 1,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":905353970,"RT_SOURCE_UPD_ID":"905353970","Instrumentkey":"1388219","KeyFndg":"4553283","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4553284","RT_INSTRUMENT_NAME":"EUR1 bil 0.50% nts due 11/15/2031","RT_MATURITY_DATE":"11/15/2031","RT_CUSIP9":"037833DS6","RT_CINS":null,"RT_ISINS":"XS2079716937","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Foreign Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"11/7/2019","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"0.5%","RT_CLASS_AMOUNT":"EUR 1,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":905353972,"RT_SOURCE_UPD_ID":"905353972","Instrumentkey":"1388220","KeyFndg":"4553284","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4607087","RT_INSTRUMENT_NAME":"US$2.25 bil 1.125% nts due 05/11/2025","RT_MATURITY_DATE":"5/11/2025","RT_CUSIP9":"037833DT4","RT_CINS":null,"RT_ISINS":"US037833DT41","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/4/2020","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"1.125%","RT_CLASS_AMOUNT":"USD 2,250,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":908010375,"RT_SOURCE_UPD_ID":"908010375","Instrumentkey":"1400335","KeyFndg":"4607087","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4607088","RT_INSTRUMENT_NAME":"US$2.5 bil 2.65% nts due 05/11/2050","RT_MATURITY_DATE":"5/11/2050","RT_CUSIP9":"037833DW7","RT_CINS":null,"RT_ISINS":"US037833DW79","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/4/2020","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.65%","RT_CLASS_AMOUNT":"USD 2,500,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":908010377,"RT_SOURCE_UPD_ID":"908010377","Instrumentkey":"1400336","KeyFndg":"4607088","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4607089","RT_INSTRUMENT_NAME":"US$1.75 bil 1.65% nts due 05/11/2030","RT_MATURITY_DATE":"5/11/2030","RT_CUSIP9":"037833DU1","RT_CINS":null,"RT_ISINS":"US037833DU14","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/4/2020","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"1.65%","RT_CLASS_AMOUNT":"USD 1,750,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":908010379,"RT_SOURCE_UPD_ID":"908010379","Instrumentkey":"1400337","KeyFndg":"4607089","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4646980","RT_INSTRUMENT_NAME":"US$1.75 bil 2.55% nts due 08/20/2060","RT_MATURITY_DATE":"8/20/2060","RT_CUSIP9":"037833EA4","RT_CINS":null,"RT_ISINS":"US037833EA41","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"8/13/2020","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.55%","RT_CLASS_AMOUNT":"USD 1,750,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":910189167,"RT_SOURCE_UPD_ID":"910189167","Instrumentkey":"1408319","KeyFndg":"4646980","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4646981","RT_INSTRUMENT_NAME":"US$1.25 bil 2.40% nts due 08/20/2050","RT_MATURITY_DATE":"8/20/2050","RT_CUSIP9":"037833DZ0","RT_CINS":null,"RT_ISINS":"US037833DZ01","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"8/13/2020","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"2.4%","RT_CLASS_AMOUNT":"USD 1,250,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":910189169,"RT_SOURCE_UPD_ID":"910189169","Instrumentkey":"1408320","KeyFndg":"4646981","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4710887","RT_INSTRUMENT_NAME":"US$ mil nts due 02/29/2028","RT_MATURITY_DATE":"2/29/2028","RT_CUSIP9":"037833EC0","RT_CINS":null,"RT_ISINS":"US037833EC07","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/1/2021","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":null,"RT_CLASS_AMOUNT":null,"RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":912884254,"RT_SOURCE_UPD_ID":"912884254","Instrumentkey":"1420540","KeyFndg":"4710887","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4710891","RT_INSTRUMENT_NAME":"US$2.75 bil nts due 02/28/2031","RT_MATURITY_DATE":"2/28/2031","RT_CUSIP9":"037833ED8","RT_CINS":null,"RT_ISINS":"US037833ED89","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"2/1/2021","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":null,"RT_CLASS_AMOUNT":"USD 2,750,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":912884262,"RT_SOURCE_UPD_ID":"912884262","Instrumentkey":"1420544","KeyFndg":"4710891","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"4964623","RT_INSTRUMENT_NAME":"US$1.25 bil 4.85% sr callable nts due 05/10/2053","RT_MATURITY_DATE":"5/10/2053","RT_CUSIP9":"037833EW6","RT_CINS":null,"RT_ISINS":"US037833EW60","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"5/8/2023","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"4.85%","RT_CLASS_AMOUNT":"USD 1,250,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":926780978,"RT_SOURCE_UPD_ID":"926780978","Instrumentkey":"1479119","KeyFndg":"4964623","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"3561035","RT_INSTRUMENT_NAME":"US$3 bil 3.85% nts due 05/04/2043","RT_MATURITY_DATE":"5/4/2043","RT_CUSIP9":"037833AL4","RT_CINS":null,"RT_ISINS":"US037833AL42","RT_DEBT_TYPE_CODE":"Senior Unsecured","RT_RATING_TYPE_CODE":"Local Currency LT","RT_CURRENT_RATING_SYMBOL":"AA+","RT_RATING_DATE":"4/30/2013","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EU|UKE","RT_INSTRUMENT_TYPE_CODE":"Notes","RT_CURRENT_COUPON_RATE":"3.85%","RT_CLASS_AMOUNT":"USD 3,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"4/18/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":413461127,"RT_SOURCE_UPD_ID":"413461127","Instrumentkey":"929663","KeyFndg":"3561035","RT_TOTAL_SECURITY_SUMMARY":0},{"INSTRUMENT_DETAIL_ID":"3801595","RT_INSTRUMENT_NAME":"4(2) CP prog auth amt US$25 bil","RT_MATURITY_DATE":null,"RT_CUSIP9":null,"RT_CINS":null,"RT_ISINS":null,"RT_DEBT_TYPE_CODE":"Commercial Paper","RT_RATING_TYPE_CODE":"Local Currency ST","RT_CURRENT_RATING_SYMBOL":"A-1+","RT_RATING_DATE":"4/24/2014","RT_CURRENT_CW_OL":null,"RT_CURRENT_CW_OL_DATE":null,"RT_REGULATORY_INDICATOR":"EE|UK","RT_INSTRUMENT_TYPE_CODE":"Commercial Paper","RT_CURRENT_COUPON_RATE":null,"RT_CLASS_AMOUNT":"USD 25,000,000,000","RT_PRIVATE_PLACEMENT_CODE":"PUBLIC ","RT_SYMBOL_GROUP_ORDER":null,"RT_LAST_CREDIT_RATING_DATE":"3/4/2025","RT_SOURCE_INSTRUMENT_DETAIL_ID":455276725,"RT_SOURCE_UPD_ID":"455276725","Instrumentkey":"1127745","KeyFndg":"3801595","RT_TOTAL_SECURITY_SUMMARY":0}]
import { Size, Purpose } from '@spglobal/koi-helpers';
import { Button } from '@spglobal/react-components';
import { useState } from 'react';
import ReactMarkdown from 'react-markdown';
import rehypeRaw from 'rehype-raw';
import remarkGfm from 'remark-gfm';
import { DivformattedContent } from '../_common/Content';

export const ReportBuilder = () => {
  const [availableItems] = useState([
    { id: '1', content: 'Item-1' },
    { id: '2', content: 'Item-2' },
    { id: '3', content: 'Item-3' },
  ]);

  const initialDroppedItem = [{ id: '4', content: 'Item-4' },
    { id: '5', content: 'Item-5' },
    { id: '6', content: 'Item-6' }];
  const [droppedItems, setDroppedItems] = useState(initialDroppedItem);

  const [isApproved,setApproval] = useState(false);

  // When drag starts, save the dragged item's id in event.dataTransfer
  const onDragStart = (e:any, id:any) => {
    e.dataTransfer.setData('text/plain', id);
  };

  // Allow dropping by preventing default behavior
  const onDragOver = (e:any) => {
    e.preventDefault();
  };

  // Handle drop event
  const onDrop = (e:any,dropIndex:any) => {
    const id = e.dataTransfer.getData('text/plain');

    // Find the dragged item in availableItems
    const draggedItem = availableItems.find(item => item.id === id);
    const dragItemDropped = droppedItems.find(item => item.id === id);
    if (!draggedItem) return;
    if(draggedItem){
      // Remove from availableItems
      //setAvailableItems(prev => prev.filter(item => item.id !== id));
      // Add to droppedItems
      setDroppedItems(prev => {
        const newItems = [...prev];
        newItems.splice(dropIndex,0,draggedItem);
        return newItems;
      });
    }
    else if(dragItemDropped){
      setDroppedItems(prev =>{
        const newItems= [...prev];
        const fromInd = newItems.findIndex(item => item.id === id);
        if(fromInd === -1) return newItems;

        const [moved]=newItems.splice(fromInd,1);
        const adjInd = dropIndex > fromInd ? dropIndex -1 : dropIndex;
        newItems.splice(adjInd,0,moved);
        return newItems;
      })
    }

    
  };

  return (
    <>
    <div style={{ display: 'flex', gap: '2rem', padding: '2rem' }}>
      {/* Section 1: Available Items */}
      <div
        style={{
          border: '1px solid gray',
          padding: '1rem',
          width: '200px',
          minHeight: '200px',
        }}
      >
        <h4>Available Items</h4>
        {availableItems.map(item => (
          <div
            key={item.id}
            draggable
            onDragStart={(e) => onDragStart(e, item.id)}
            style={{
              padding: '8px',
              margin: '4px 0',
              backgroundColor: 'Black',
              cursor: 'grab',
            }}
          >
            <DivformattedContent>
                          <ReactMarkdown
                            remarkPlugins={[remarkGfm]}
                            rehypePlugins={[rehypeRaw] as any}
                          >
                            {item.content}
                          </ReactMarkdown>
                        </DivformattedContent>
            
          </div>
        ))}
      </div>

      {/* Section 2: Dropped Items */}
      <div
        onDragOver={onDragOver}
        style={{
          border: '1px solid gray',
          padding: '1rem',
          width: '200px',
          minHeight: '200px',
          backgroundColor: 'blue',
        }}
      >
        <h4>Dropped Items</h4>
        {droppedItems.map((item,index) => (
          <div
            onDragOver={onDragOver}
            onDrop={(e:any) => onDrop(e,index)}
            key={item.id}
            style={{
              padding: '8px',
              margin: '4px 0',
              backgroundColor: 'Black',
            }}
          >
            {item.content}
          </div>
        ))}
      </div>
    </div>
     );
};



"suggestionsData": {
        "title": "Not the right entity?",
        "behavior": "expand",
        "content": [
          {
            "text": "We found other close matches. Select an entity from the list below to re-run your question:",
            "suggestions": null
          },
          {
            "text": null,
            "suggestions": [
              {
                "id": "19912563",
                "name": "ZoomInfo Technologies Inc.",
                "query": "What is the rating of ZoomInfo Technologies Inc.?"
              }
            ]
          },
          {
            "text": "Tip: Use the @ symbol in your question to pull up search results and select the company you'd like to see info for. The RD badge indicates Ratings coverage.",
            "suggestions": null
          }
        ]
      },

patch.op = JSON.parse(ev.data).op;
                            patch.value = JSON.parse(ev.data).responseBody[0].answer.replace(/\n{3,}/g, '\n\n');
                            patch.path = '/response_body/0/content';

                            patchesArr.push(patch);
                            const patches = transformPatches(patchesArr);

                            setTimeout(() => {
                              setInteractions((prev: any) => {
                                const next = [...prev];
                                streamStartIndex++;
                                const lastMessage = next.pop();
                                if (patch.op == 'end') {
                                  feedbackEnabled = true;
                                  lastMessage.loading = false;
                                }
                                const patchedMessage = patchMessage(
                                  lastMessage,
                                  patches,
                                  feedbackEnabled
                                );

                                next.push(patchedMessage);
                                return next;
                              });
                            },2000);
                            return;
                          }
                          return;
                        }
const GroupRowRenderer = (params:any ) => {
    const {node}  = params;
    const [isExpanded, setIsExpanded] = React.useState(node.expanded);

    const onExpandToggle = () => {
      const newState = !isExpanded;
      node.setExpanded(newState);
      setIsExpanded(newState);
    };
    return (<div style={{padding:'5px 1px 1px 1px',fontWeight:'700'}}><span style={{cursor:'pointer'}} onClick={onExpandToggle}>
      {isExpanded && node?.rowIndex === 0 ? <Icon icon={faCaretUp}
        size={Size.MEDIUM}></Icon> : <Icon icon={faCaretDown}
        size={Size.MEDIUM}></Icon>}</span>{key}{gpCnt ? modKey:''}</div>);
  }

const ExpandableCellRenderer = (props:any) => {
    const { value,data,api,node } = props; // Get text value & grid API
    const [expanded, setExpanded] = useState(false);
    const toggleExpand = () => {
      setExpanded(!expanded);
      const updRow = {...data, isExpanded: !expanded};
      //data.isExpanded = !isExpanded;
      node.setData(updRow);
      node.setRowHeight(!expanded ? 150:30);
        api.refreshCells({ force: true });
        api.onRowHeightChanged();
    };

    return (
      <div className='cellWrap'>
        <span className='cellWrapTxt'>{expanded ? value : value.substring(0, 20) + "..."}</span>
        {value && value.length > 20 && (
          <a
            href="#"
            onClick={(e) => {
              e.preventDefault();
              toggleExpand();
            }}
            className='cellMorelink'
          >
            {expanded ? "Show Less" : "Show More"}
          </a>
        )}
      </div>
    );
  };


**M&A Transactions by Stryker in the Last 5 Years**\n\n| Target Company | Valuation | Transaction Date |\n| --- | --- | --- |\n| Wright Medical Group N.V. | Not Specified | 2020 |\n| Voceru Communications | Not Specified | 2022 |\n| Inari Medical Inc. | $4.9 billion | Q1 2025 (Expected) |\n\nThe latest S&P Global Ratings research does not contain the valuation details for the acquisitions of Wright Medical Group N.V. and Voceru Communications. However, it does mention that Stryker's acquisition of Inari Medical Inc. is valued at $4.9 billion and is expected to close in the first quarter of 2025.
var downExcel: any = await downloadExcel(resp.message);
            //const buffer = new ArrayBuffer(downExcel.length);
            const binaryStr = new TextEncoder().encode(downExcel);
            const bString = String.fromCharCode(...binaryStr);
           
            const view = new Uint8Array(binaryStr.length);
            for (let i = 0; i < bString.length; i++) {
              view[i] = bString.charCodeAt(i);
            }
            
            let newWorkbook;
            try
            {
              newWorkbook = new ExcelJS.Workbook();
              await newWorkbook.xlsx.load(view);
            }catch(e)
            {
              const workBookSheetJS = XLSX.read(view, { type: 'array' });
              const arrBuffer = XLSX.write(workBookSheetJS, { bookType: 'xlsx', type: 'array' });
              newWorkbook = new ExcelJS.Workbook();
              await newWorkbook.xlsx.load(arrBuffer);
            }

[{"Company1":"Tesla Inc.","Company2":"Aston Martin Holdings","Company3":"Ford Motor Co.","Company4":"General Motors","Company5":"Netflix Inc.","Id":0,"ParentId":0,"MnemonicName":"Root","children":[{"Company1":"BBB","Company2":"BBB-","Company3":"BBB","Company4":"A","Id":1,"ParentId":0,"MnemonicName":"Ratings & Scores","children":[{"Company1":"10/6/2022","Company2":"10/30/2023","Company3":"1/10/2017","Company4":"7/22/2024","Id":10,"ParentId":1,"MnemonicName":"Issuer Credit Rating (Foreign Currency LT)","children":[]},{"Company1":"12/30/2024","Company2":"11/8/2023","Company3":"1/5/2025","Company4":"1/4/2025","Id":11,"ParentId":1,"MnemonicName":"Scores & Modifiers","children":[]}]},{"Company1":"Market Derived Signals","Id":4,"ParentId":0,"MnemonicName":"Market Derived Signals","children":[{"Company1":"Credit Default Swap Based Signal","Id":60,"ParentId":4,"MnemonicName":"Credit Default Swap Based Signal","children":[]},{"Company1":"Probability of Default Based Signal","Id":66,"ParentId":4,"MnemonicName":"Probability of Default Based Signal","children":[]}]}]}]
const columnsToModify = ["Issuer Credit Rating","Key Rating Factors","BANKING INDUSTRY COUNTRY RISK ASSESSMENT"];
  columnsToModify.forEach((col:any) => {
    let temp = data.find(x=>x.mnemonicName.includes(col));
    let tempdata = data.filter(y=>y.parentId === temp.id);
    tempdata.forEach()
  })


function isDecimalString(str: string): boolean {
  if (!/^-?\d+(\.\d+)?$/.test(str)) {
    return false
  }
  const num = Number(str);
  return !Number.isNaN(num) && !Number.isInteger(num);
}

<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n  <head>\r\n    <meta\r\n      http-equiv=\"Content-Type\"\r\n      content=\"text/html; charset=utf-8\" />\r\n    <title>Outlook</title>\r\n    <style>\r\np.pt-NormalWeb {\r\n    margin-top:5pt;\r\n    margin-bottom:5pt;\r\n    text-align:left;\r\n    font-family:Calibri;\r\n    font-size:12pt;\r\n    line-height:108%;\r\n    margin-left:0pt;\r\n    margin-right:0pt;\r\n}\r\nspan.pt-DefaultParagraphFont {\r\n    font-family:'Times New Roman', 'serif';\r\n    font-size:12pt;\r\n    font-weight:normal;\r\n    margin:0in;\r\n    padding:0in;\r\n}\r\nspan.pt-Hyperlink {\r\n    color:#000000;\r\n    font-family:Akkurat Pro;\r\n    font-size:9pt;\r\n    font-weight:bold;\r\n    margin:0in;\r\n    padding:0in;\r\n}\r\nspan.pt-Hyperlink-000000 {\r\n    font-family:Akkurat Pro;\r\n    font-size:9pt;\r\n    text-decoration:underline;\r\n    font-weight:normal;\r\n    margin:0in;\r\n    padding:0in;\r\n}\r\nspan.pt-DefaultParagraphFont-000001 {\r\n    font-family:Akkurat Pro;\r\n    font-size:9pt;\r\n    font-weight:normal;\r\n    margin:0in;\r\n    padding:0in;\r\n}\r\n</style>\r\n  </head>\r\n  <body>\r\n    <div>\r\n      <p\r\n        dir=\"ltr\"\r\n        class=\"pt-NormalWeb\">\r\n        <span\r\n          class=\"pt-DefaultParagraphFont\">The stable outlook reflects our expectations that&nbsp;</span>\r\n        <a\r\n          href=\"https://www.testciq.com/CIQDotNet/RatingsDirect/GCPTearsheet.aspx?entityid=100925\">\r\n          <span\r\n            class=\"pt-Hyperlink\">\r\n            <b>GE</b>\r\n          </span>\r\n        </a>\r\n        <span\r\n          class=\"pt-DefaultParagraphFont\">&nbsp;will maintain debt leverage below 3x in 2024 following the power spin-off and thereafter, supported by continuing strong commercial aerospace demand. We also expect that GE will follow&nbsp;</span>\r\n        <a\r\n          href=\"https://www.testciq.com/CIQDotNet/CreditResearch/SPResearch.aspx?ArtObjectId=101600651&amp;ArtRevId=1\">\r\n          <span\r\n            class=\"pt-Hyperlink-000000\">\r\n            <u>financial&nbsp;</u>\r\n          </span>\r\n        </a>\r\n        <span\r\n          class=\"pt-DefaultParagraphFont-000001\">, July 8, 2024</span>\r\n        <span\r\n          class=\"pt-DefaultParagraphFont\">policies consistent with this leverage profile.</span>\r\n      </p>\r\n    </div>\r\n  </body>\r\n</html>

[
    "RATINGS & SCORES",
    "Issuer Credit Rating (Foreign Currency LT)",
    "Rating Date",
    "Last Review Date",
    "Empty",
    "Scores & Modifiers",
    "Scores & Modifiers Date",
    "Scores",
    "Business Risk",
    "Industry Risk",
    "Empty",
    "Modifiers",
    "Diversification/ Portfolio Effect",
    "Capital Structure"
]
[{"field":"group","headerName":"","minWidth":300,"sortable":false,"cellRenderer":"agGroupCellRenderer"},{"field":"Company1","headerName":"Tesla Inc.","minWidth":150,"sortable":false},{"field":"Company2","headerName":"Aston Martin Holdings (UK) Limited","minWidth":150,"sortable":false},{"field":"Company3","headerName":"Ford Motor Co.","minWidth":150,"sortable":false},{"field":"Company4","headerName":"_)(*&^%$#@!General Motors Co.","minWidth":150,"sortable":false},{"field":"Company5","headerName":"Netflix Inc.","minWidth":150,"sortable":false},{"field":"Company6","headerName":null,"minWidth":150,"sortable":false},{"field":"Company7","headerName":null,"minWidth":150,"sortable":false},{"field":"Company8","headerName":null,"minWidth":150,"sortable":false}]

[{"Company1":"Tesla Inc.","Company2":"Aston Martin Holdings (UK) Limited","Company3":"Ford Motor Co.","Company4":"_)(*&^%$#@!General Motors Co.","Company5":"Netflix Inc.","Id":0,"ParentId":0,"MnemonicName":null,"MnemonicClass":null,"ChartFlag":false,"DataField":"RT_ENTITY_NAME","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":"4574287","Company2":"11127873","Company3":"113873","Company4":"4272273","Company5":"4104060","Id":1,"ParentId":-1,"MnemonicName":"RATINGS & SCORES","MnemonicClass":"IsBold","ChartFlag":false,"DataField":"RT_ENTITY_ID","ProductDefinition":"ENTITY_ID","Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":"BBB","Company2":null,"Company3":"BBB-","Company4":"BBB","Company5":"A","Id":10,"ParentId":1,"MnemonicName":"Issuer Credit Rating (Foreign Currency LT)","MnemonicClass":"IsBold","ChartFlag":false,"DataField":"RDICRRatingType","ProductDefinition":"Rat","Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":"10/6/2022","Company2":null,"Company3":"10/30/2023","Company4":"1/10/2017","Company5":"7/22/2024","Id":500,"ParentId":10,"MnemonicName":"Rating Date","MnemonicClass":null,"ChartFlag":false,"DataField":"RDRatingDate","ProductDefinition":"Date on which a credit rating was issued","Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":"12/30/2024","Company2":null,"Company3":"11/8/2023","Company4":"1/5/2025","Company5":"1/4/2025","Id":501,"ParentId":10,"MnemonicName":"Last Review Date","MnemonicClass":null,"ChartFlag":false,"DataField":"RDLastReviewDate","ProductDefinition":"Dat","Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":504,"ParentId":10,"MnemonicName":"","MnemonicClass":null,"ChartFlag":false,"DataField":"","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]}]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":13,"ParentId":1,"MnemonicName":"Scores & Modifiers","MnemonicClass":"IsBold","ChartFlag":false,"DataField":null,"ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":null,"Company2":null,"Company3":"11/8/2023","Company4":"1/2/2024","Company5":"5/29/2024","Id":505,"ParentId":13,"MnemonicName":"Scores & Modifiers Date","MnemonicClass":null,"ChartFlag":false,"DataField":"RtgScoreDate","ProductDefinition":"Time stamp when the score was reviewed.","Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":11,"ParentId":13,"MnemonicName":"Scores","MnemonicClass":"IsBold","ChartFlag":false,"DataField":null,"ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":"7","Company2":null,"Company3":"Satisfactory","Company4":"Satisfactory","Company5":"Strong","Id":506,"ParentId":11,"MnemonicName":"Business Risk","MnemonicClass":"IsBoldDefn","ChartFlag":false,"DataField":"RtgBusinessRisk","ProductDefinition":"The position.","Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":"","Company2":null,"Company3":"Moderately High Risk","Company4":"Moderately High Risk","Company5":"Intermediate Risk","Id":507,"ParentId":11,"MnemonicName":"Industry Risk","MnemonicClass":null,"ChartFlag":false,"DataField":"RtgIndRisk","ProductDefinition":"Indust","Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":513,"ParentId":11,"MnemonicName":"","MnemonicClass":null,"ChartFlag":false,"DataField":"","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]}]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":12,"ParentId":13,"MnemonicName":"Modifiers","MnemonicClass":"IsBold","ChartFlag":false,"DataField":null,"ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":"","Company2":null,"Company3":"Neutral (no impact)","Company4":"Neutral (no impact)","Company5":"Neutral (no impact)","Id":514,"ParentId":12,"MnemonicName":"Diversification/ Portfolio Effect","MnemonicClass":null,"ChartFlag":false,"DataField":"RtgPortfolioDiversification","ProductDefinition":"Di more notches.","Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":"","Company2":null,"Company3":"Neutral (no impact)","Company4":"Neutral (no impact)","Company5":"Neutral (no impact)","Id":515,"ParentId":12,"MnemonicName":"Capital Structure","MnemonicClass":null,"ChartFlag":false,"DataField":"RtgCapitalStructureAdj","ProductDefinition":"Capis.","Company6":null,"Company7":null,"Company8":null,"children":[]}]}]}]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":4,"ParentId":-1,"MnemonicName":"MARKET DERIVED SIGNALS","MnemonicClass":"IsBold","ChartFlag":false,"DataField":null,"ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":60,"ParentId":4,"MnemonicName":"Credit Default Swap Based Signal","MnemonicClass":"","ChartFlag":false,"DataField":null,"ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":"bbb","Company2":null,"Company3":"bb","Company4":"bbb-","Company5":"aa-","Id":61,"ParentId":60,"MnemonicName":"Signal","MnemonicClass":"NoPopUP","ChartFlag":false,"DataField":"Signal","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":"11/5/2024","Company2":null,"Company3":"11/5/2024","Company4":"11/5/2024","Company5":"11/5/2024","Id":62,"ParentId":60,"MnemonicName":"Signal Date","MnemonicClass":"NoPopUP","ChartFlag":false,"DataField":"SignalDate","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]}]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":66,"ParentId":4,"MnemonicName":"Probability of Default Based Signal","MnemonicClass":"","ChartFlag":false,"DataField":null,"ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[{"Company1":"bbb","Company2":"ccc+","Company3":"bb+","Company4":"bbb+","Company5":"bbb","Id":67,"ParentId":66,"MnemonicName":"Signal","MnemonicClass":"NoPopUP","ChartFlag":false,"DataField":"Signal","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]},{"Company1":"3/10/2021","Company2":"12/26/2021","Company3":"8/3/2022","Company4":"8/4/2022","Company5":"8/4/2022","Id":68,"ParentId":66,"MnemonicName":"Signal Date","MnemonicClass":"NoPopUP","ChartFlag":false,"DataField":"SignalDate","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]}]}]},{"Company1":null,"Company2":null,"Company3":null,"Company4":null,"Company5":null,"Id":58,"ParentId":3,"MnemonicName":"","MnemonicClass":null,"ChartFlag":false,"DataField":"","ProductDefinition":null,"Company6":null,"Company7":null,"Company8":null,"children":[]}]
